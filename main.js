(()=>{"use strict";const e=class{constructor(e){this.positions=[...e]}};class t{constructor(e){this.location=e,this.KNIGHT_OFFSETS=[[1,2],[1,-2],[2,1],[2,-1],[-1,2],[-1,-2],[-2,1],[-2,-1]]}possibleLocations(e){let t=[];return this.KNIGHT_OFFSETS.forEach((s=>{let n=[+e[0]+ +s[0],+e[1]+ +s[1]];t.push(n)})),t=t.filter((e=>!(e[0]>7||e[0]<0||e[1]<0||e[1]>7))),t}moveToLocation(t){if(t[0]<0||t[0]>7||t[1]<0||t[1]>7)return null;console.log("called");const s=[],n=new e([this.location]);let r;console.log(n),s.push(n);let a=0;for(;;){r=s.shift();const n=r.positions;if(+n[n.length-1][0]==+t[0]&&+n[n.length-1][1]==+t[1])break;this.possibleLocations(n[n.length-1]).forEach((t=>{const r=[].concat(n);r.push(t),s.push(new e(r))})),a++}return console.log(a),r}}let s,n,r,a="none";const c=document.querySelector(".knight"),i=document.querySelector(".knight-but"),o=document.querySelector(".end-but"),l=document.querySelector(".travail"),d=document.querySelector(".ghostknight"),u=document.querySelector(".ghostflag");function h(){i.classList.remove("selected"),o.classList.remove("selected"),l.classList.remove("selected"),d.classList.add("hidden"),u.classList.add("hidden")}function g(e){if("travailing"!=a)switch(a){case"selectKnight":h(),a="none",d.classList.add("hidden"),e.currentTarget.appendChild(c),c.classList.remove("hidden"),s=[+e.currentTarget.getAttribute("data-row"),+e.currentTarget.getAttribute("data-column")];break;case"selectSquare":h(),a="none",u.classList.add("hidden"),e.currentTarget.classList.add("target"),r&&r.classList.remove("target"),r=e.currentTarget,n=[+e.currentTarget.getAttribute("data-row"),+e.currentTarget.getAttribute("data-column")]}}function v(e){if("travailing"!=a)switch(a){case"selectKnight":e.currentTarget.appendChild(d),d.classList.remove("hidden");break;case"selectSquare":e.currentTarget.appendChild(u),u.classList.remove("hidden")}}function m(e){if("travailing"!=a)switch(a){case"selectKnight":e.currentTarget.removeChild(d),d.classList.add("hidden");break;case"selectSquare":e.currentTarget.removeChild(u),u.classList.add("hidden")}}i.addEventListener("click",(e=>{if("travailing"!==a){if("selectKnight"===a)return a="none",void h();h(),i.classList.add("selected"),a="selectKnight"}})),o.addEventListener("click",(e=>{if("travailing"!==a){if("selectSquare"===a)return a="none",void h();h(),o.classList.add("selected"),a="selectSquare"}})),l.addEventListener("click",(()=>{h(),l.classList.add("selected"),a="none",s&&n?function(){const e=new t(s).moveToLocation(n).positions;let r=0;a="travailing";let i=0,o=0,l=setInterval((()=>{if(r==e.length-1)return console.log("Final location"),s=n,clearInterval(l),a="none",c.style.transform="translate(0,0)",document.querySelector(`[data-row="${e[r][0]}"][data-column="${e[r][1]}"]`).appendChild(c),void h();console.log(e[r]),r++;const t=function(e,t,s,n){const r=+t[0]-+e[0],a=+t[1]-+e[1];return c.style.transform=`translate(${n+75*a}px, ${s+75*r}px)`,[s+75*r,n+75*a]}(e[r-1],e[r],i,o);console.log(t),i=+t[0],o=+t[1]}),750)}():h()})),function(e){for(let t=0;t<8;t++)for(let s=0;s<8;s++){const n=document.createElement("div");n.classList.add("square"),(t%2==0&&s%2==1||t%2==1&&s%2==0)&&n.classList.add("black"),n.setAttribute("data-row",t),n.setAttribute("data-column",s),n.addEventListener("click",g),n.addEventListener("mouseleave",m),n.addEventListener("mouseenter",v),e.appendChild(n)}}(document.querySelector(".grid"))})();