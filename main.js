(()=>{"use strict";const e=class{constructor(e){this.positions=[...e]}};class t{constructor(e){this.location=e,this.KNIGHT_OFFSETS=[[1,2],[1,-2],[2,1],[2,-1],[-1,2],[-1,-2],[-2,1],[-2,-1]]}possibleLocations(e){let t=[];return this.KNIGHT_OFFSETS.forEach((s=>{let n=[+e[0]+ +s[0],+e[1]+ +s[1]];t.push(n)})),t=t.filter((e=>!(e[0]>7||e[0]<0||e[1]<0||e[1]>7))),t}moveToLocation(t){if(t[0]<0||t[0]>7||t[1]<0||t[1]>7)return null;console.log("called");const s=[],n=new e([this.location]);let c;console.log(n),s.push(n);let o=0;for(;;){c=s.shift();const n=c.positions;if(+n[n.length-1][0]==+t[0]&&+n[n.length-1][1]==+t[1])break;this.possibleLocations(n[n.length-1]).forEach((t=>{const c=[].concat(n);c.push(t),s.push(new e(c))})),o++}return console.log(o),c}}let s,n,c,o="none";const r=document.querySelector(".knight"),a=document.querySelector(".knight-but"),l=document.querySelector(".end-but"),i=document.querySelector(".travail"),d=document.querySelector(".ghostknight"),u=document.querySelector(".ghostflag");function g(){a.classList.remove("selected"),l.classList.remove("selected"),i.classList.remove("selected")}function h(e){if("travailing"!=o)switch(o){case"selectKnight":g(),o="none",d.classList.add("hidden"),e.currentTarget.appendChild(r),r.classList.remove("hidden"),s=[+e.currentTarget.getAttribute("data-row"),+e.currentTarget.getAttribute("data-column")];break;case"selectSquare":g(),o="none",u.classList.add("hidden"),e.currentTarget.classList.add("target"),c&&c.classList.remove("target"),c=e.currentTarget,n=[+e.currentTarget.getAttribute("data-row"),+e.currentTarget.getAttribute("data-column")]}}function m(e){if(console.log(o),"travailing"!=o)switch(o){case"selectKnight":e.currentTarget.appendChild(d),d.classList.remove("hidden");break;case"selectSquare":e.currentTarget.appendChild(u),u.classList.remove("hidden")}}function v(e){if(console.log("left"),"travailing"!=o)switch(o){case"selectKnight":e.currentTarget.removeChild(d),d.classList.add("hidden");break;case"selectSquare":e.currentTarget.removeChild(u),u.classList.add("hidden")}}a.addEventListener("click",(e=>{"none"===o&&(g(),a.classList.add("selected"),o="selectKnight")})),l.addEventListener("click",(e=>{"none"===o&&(g(),l.classList.add("selected"),o="selectSquare")})),i.addEventListener("click",(()=>{g(),i.classList.add("selected"),s&&n&&function(){const e=new t(s).moveToLocation(n).positions;let c=0;o="travailing";let a=0,l=0,i=setInterval((()=>{if(c==e.length-1)return console.log("Final location"),s=n,clearInterval(i),o="none",r.style.transform="translate(0,0)",document.querySelector(`[data-row="${e[c][0]}"][data-column="${e[c][1]}"]`).appendChild(r),void g();console.log(e[c]),c++;const t=function(e,t,s,n){const c=+t[0]-+e[0],o=+t[1]-+e[1];return r.style.transform=`translate(${n+75*o}px, ${s+75*c}px)`,[s+75*c,n+75*o]}(e[c-1],e[c],a,l);console.log(t),a=+t[0],l=+t[1]}),750)}()})),function(e){for(let t=0;t<8;t++)for(let s=0;s<8;s++){const n=document.createElement("div");n.classList.add("square"),(t%2==0&&s%2==1||t%2==1&&s%2==0)&&n.classList.add("black"),n.setAttribute("data-row",t),n.setAttribute("data-column",s),n.addEventListener("click",h),n.addEventListener("mouseleave",v),n.addEventListener("mouseenter",m),e.appendChild(n)}}(document.querySelector(".grid"))})();