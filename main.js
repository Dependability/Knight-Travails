(()=>{"use strict";const t=class{constructor(e){this.positions=[...e]}};class n{constructor(e){this.location=e,this.KNIGHT_OFFSETS=[[1,2],[1,-2],[2,1],[2,-1],[-1,2],[-1,-2],[-2,1],[-2,-1]]}possibleLocations(e){let t=[];return this.KNIGHT_OFFSETS.forEach((n=>{let s=[+e[0]+ +n[0],+e[1]+ +n[1]];t.push(s)})),t=t.filter((e=>!(e[0]>7||e[0]<0||e[1]<0||e[1]>7))),t}moveToLocation(e){if(e[0]<0||e[0]>7||e[1]<0||e[1]>7)return null;console.log("called");const n=[],s=new t([this.location]);let r;console.log(s),n.push(s);let a=0;for(;;){r=n.shift();const s=r.positions;if(+s[s.length-1][0]==+e[0]&&+s[s.length-1][1]==+e[1])break;this.possibleLocations(s[s.length-1]).forEach((e=>{const r=[].concat(s);r.push(e),n.push(new t(r))})),a++}return console.log(a),r}}let s,r,a,c="none";const i=document.querySelector(".knight"),o=document.querySelector(".knight-but"),l=document.querySelector(".end-but"),d=document.querySelector(".travail"),u=document.querySelector(".ghostknight"),h=document.querySelector(".ghostflag");function g(){o.classList.remove("selected"),l.classList.remove("selected"),d.classList.remove("selected"),u.classList.add("hidden"),h.classList.add("hidden")}function v(e){if("travailing"!=c)switch(c){case"selectKnight":g(),c="none",u.classList.add("hidden"),e.currentTarget.appendChild(i),i.classList.remove("hidden"),s=[+e.currentTarget.getAttribute("data-row"),+e.currentTarget.getAttribute("data-column")];break;case"selectSquare":g(),c="none",h.classList.add("hidden"),e.currentTarget.classList.add("target"),a&&a.classList.remove("target"),a=e.currentTarget,r=[+e.currentTarget.getAttribute("data-row"),+e.currentTarget.getAttribute("data-column")]}}function f(e){if("travailing"!=c)switch(c){case"selectKnight":e.currentTarget.appendChild(u),u.classList.remove("hidden");break;case"selectSquare":e.currentTarget.appendChild(h),h.classList.remove("hidden")}}function m(e){if("travailing"!=c)switch(c){case"selectKnight":e.currentTarget.removeChild(u),u.classList.add("hidden");break;case"selectSquare":e.currentTarget.removeChild(h),h.classList.add("hidden")}}o.addEventListener("click",(e=>{if(e.preventDefault(),"travailing"!==c){if("selectKnight"===c)return c="none",void g();g(),o.classList.add("selected"),c="selectKnight"}})),l.addEventListener("click",(e=>{if(e.preventDefault(),"travailing"!==c){if("selectSquare"===c)return c="none",void g();g(),l.classList.add("selected"),c="selectSquare"}})),d.addEventListener("click",(()=>{e.preventDefault(),g(),d.classList.add("selected"),c="none",s&&r?function(){const e=new n(s).moveToLocation(r).positions;let t=0;c="travailing";let a=0,o=0,l=setInterval((()=>{if(t==e.length-1)return console.log("Final location"),s=r,clearInterval(l),c="none",i.style.transform="translate(0,0)",document.querySelector(`[data-row="${e[t][0]}"][data-column="${e[t][1]}"]`).appendChild(i),void g();console.log(e[t]),t++;const n=function(e,t,n,s){let r=window.innerWidth>650?75:37.5;const a=+t[0]-+e[0],c=+t[1]-+e[1];return i.style.transform=`translate(${s+ +c*r}px, ${n+ +a*r}px)`,[n+ +a*r,s+ +c*r]}(e[t-1],e[t],a,o);console.log(n),a=+n[0],o=+n[1]}),750)}():g()})),function(e){for(let t=0;t<8;t++)for(let n=0;n<8;n++){const s=document.createElement("div");s.classList.add("square"),(t%2==0&&n%2==1||t%2==1&&n%2==0)&&s.classList.add("black"),s.setAttribute("data-row",t),s.setAttribute("data-column",n),s.addEventListener("click",v),s.addEventListener("mouseleave",m),s.addEventListener("mouseenter",f),e.appendChild(s)}}(document.querySelector(".grid"))})();